/**
 * Mobile Menu Toggle
 * Handles opening and closing of mobile navigation menu
 */

// Get DOM elements
const menuButton = document.querySelector('.nav__btn');
const mobileMenu = document.querySelector('.nav__list--mobile');

// Check if elements exist
if (menuButton && mobileMenu) {
  // Toggle menu on button click
  menuButton.addEventListener('click', () => {
    mobileMenu.classList.toggle('active');
    
    // Update ARIA attribute for accessibility
    const isOpen = mobileMenu.classList.contains('active');
    menuButton.setAttribute('aria-expanded', isOpen);
  });

  // Close menu when clicking on a link (for better UX)
  const menuLinks = mobileMenu.querySelectorAll('.nav__item-link');
  menuLinks.forEach(link => {
    link.addEventListener('click', () => {
      mobileMenu.classList.remove('active');
      menuButton.setAttribute('aria-expanded', 'false');
    });
  });

  // Close menu when clicking outside
  document.addEventListener('click', (event) => {
    const isClickInsideMenu = mobileMenu.contains(event.target);
    const isClickOnButton = menuButton.contains(event.target);
    
    if (!isClickInsideMenu && !isClickOnButton && mobileMenu.classList.contains('active')) {
      mobileMenu.classList.remove('active');
      menuButton.setAttribute('aria-expanded', 'false');
    }
  });

  // Close menu on escape key
  document.addEventListener('keydown', (event) => {
    if (event.key === 'Escape' && mobileMenu.classList.contains('active')) {
      mobileMenu.classList.remove('active');
      menuButton.setAttribute('aria-expanded', 'false');
    }
  });
} else {
  console.warn('Menu button or mobile menu not found in DOM');
}